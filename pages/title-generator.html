<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OZONæ ‡é¢˜ç”Ÿæˆå·¥å…·</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #333;
            display: flex;
        }

        /* åŠ¨ç”»æ ·å¼ */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes progress {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        .analyzing {
            animation: pulse 2s infinite;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading-container {
            display: none;
            text-align: center;
            padding: 20px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 10px;
            margin: 10px 0;
            border: 1px solid rgba(76, 175, 80, 0.3);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(76, 175, 80, 0.3);
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        .loading-text {
            color: #4CAF50;
            font-size: 16px;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(76, 175, 80, 0.2);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-size: 12px;
            margin-top: 10px;
        }

        .step {
            opacity: 0.5;
            transition: opacity 0.3s ease;
        }

        .step.active {
            opacity: 1;
            font-weight: bold;
            color: #4CAF50;
        }

        #competitorAnalysis {
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s ease;
        }

        #competitorAnalysis.show {
            transform: translateY(0);
            opacity: 1;
        }

        .typewriter {
            overflow: hidden;
            border-right: 2px solid #4CAF50;
            white-space: nowrap;
            margin: 0 auto;
            animation: typing 2s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #4CAF50; }
        }

        .result-item {
            opacity: 0;
            transform: translateX(-20px);
            animation: slideInLeft 0.6s ease forwards;
        }

        .result-item:nth-child(1) { animation-delay: 0.1s; }
        .result-item:nth-child(2) { animation-delay: 0.2s; }
        .result-item:nth-child(3) { animation-delay: 0.3s; }
        .result-item:nth-child(4) { animation-delay: 0.4s; }

        @keyframes slideInLeft {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        .sidebar {
            width: 200px;
            background-color: white;
            color: #333;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            z-index: 100;
            overflow-y: auto;
            border-right: 1px solid #e0e0e0;
        }
        .sidebar-header {
            padding: 15px;
            background-color: #1565C0;
            text-align: left;
            font-weight: bold;
            font-size: 18px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            color: white;
        }
        .sidebar-menu {
            padding: 15px 0;
        }
        .sidebar-menu-item {
            padding: 10px 15px;
            display: flex;
            align-items: center;
            color: #666;
            text-decoration: none;
            transition: background-color 0.3s;
            font-size: 14px;
        }
        .sidebar-menu-item:hover {
            background-color: rgba(0,0,0,0.05);
            color: #1565C0;
        }
        .sidebar-menu-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
            color: #999;
        }
        .sidebar-menu-item:hover i {
            color: #1565C0;
        }
        .sidebar-breadcrumb {
            padding: 10px 15px;
            font-size: 14px;
            display: flex;
            align-items: center;
            background-color: #1976D2;
            margin-bottom: 5px;
        }
        .sidebar-breadcrumb a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
        }
        .sidebar-breadcrumb a:hover {
            color: white;
            text-decoration: underline;
        }
        .sidebar-breadcrumb .separator {
            margin: 0 8px;
            color: rgba(255,255,255,0.5);
        }
        .sidebar-breadcrumb .current {
            color: white;
            font-weight: 500;
        }
        .main-content {
            flex: 1;
            margin-left: 200px;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 30px;
            background-color: white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
            width: 100%;
        }
        .header {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
            padding: 25px;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(46, 125, 50, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
        }
        .form-group {
            margin-bottom: 22px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #444;
            font-size: 15px;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        input[type="text"]:focus, textarea:focus {
            border-color: #4CAF50;
            box-shadow: 0 2px 10px rgba(76, 175, 80, 0.2);
            outline: none;
        }
        .feature-container {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        .feature-input {
            flex-grow: 1;
            margin-right: 10px;
        }
        .add-btn, .remove-btn {
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 8px;
            transition: all 0.2s ease;
            box-shadow: 0 3px 5px rgba(0,0,0,0.1);
        }
        .add-btn:hover, .remove-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.15);
        }
        .add-btn {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
        }
        .remove-btn {
            background: linear-gradient(135deg, #f44336, #c62828);
        }
        .btn {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            animation: pulse 1.5s infinite;
        }
        .btn-secondary {
            background: linear-gradient(135deg, #f44336, #c62828);
        }
        .btn-view {
            background: linear-gradient(135deg, #2196F3, #1565C0);
        }
        .result-area {
            margin-top: 20px;
            border-top: 1px solid #e0e0e0;
            padding-top: 25px;
        }
        .ai-prompt {
            background-color: #f9f9f9;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            min-height: 100px;
            margin-bottom: 20px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            font-size: 15px;
            line-height: 1.6;
        }
        .button-group {
            display: flex;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .logo {
            height: 40px;
            margin-right: 15px;
            vertical-align: middle;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            color: #777;
            font-size: 14px;
        }
        .customer-service {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        .customer-service:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(0,0,0,0.25);
        }
        .customer-service i {
            font-size: 28px;
        }
        
        /* Toastæç¤ºæ ·å¼ */
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 1100;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .toast.show {
            opacity: 1;
        }
        @media (max-width: 600px) {
            .button-group {
                flex-direction: column;
            }
            .btn {
                margin-bottom: 12px;
            }
            .customer-service {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
            }
            .customer-service i {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-header">
            <span>OZONæ ‡é¢˜ç”Ÿæˆ</span>
            <i class="fas fa-bars" style="margin-left: auto;"></i>
        </div>
        <div class="sidebar-menu">
            <div class="sidebar-breadcrumb">
                <a href="../index.html">é¦–é¡µ</a>
                <span class="separator">></span>
                <a href="ai-tools.html">AIå·¥å…·</a>
                <span class="separator">></span>
                <span class="current">AIæ ‡é¢˜-ç®€ä»‹-å…³é”®è¯</span>
            </div>
            <a href="../index.html" class="sidebar-menu-item"><i class="fas fa-home"></i> é¦–é¡µ</a>
            <a href="tools.html" class="sidebar-menu-item"><i class="fas fa-tools"></i> å®ç”¨å·¥å…·</a>
            <a href="ai-tools.html" class="sidebar-menu-item"><i class="fas fa-robot"></i> AIå·¥å…·</a>
            <a href="data-analysis.html" class="sidebar-menu-item"><i class="fas fa-chart-line"></i> æ•°æ®åˆ†æ</a>
            <a href="ozon-plugin.html" class="sidebar-menu-item"><i class="fas fa-puzzle-piece"></i> OZONæ’ä»¶</a>
            <a href="settings.html" class="sidebar-menu-item"><i class="fas fa-cog"></i> è®¾ç½®</a>
        </div>
    </div>
    
    <div class="main-content">
    <div class="container">
        
        <div class="header">
            <img src="../images/logo.png" alt="AIå·¥å…·" class="logo">
            <h1>AIæ™ºèƒ½ç”Ÿæˆ: æ ‡é¢˜ã€ç®€ä»‹ã€å…³é”®è¯ã€æ ‡ç­¾</h1>
        </div>
        
        <!-- æ›´æ–°é€šçŸ¥ -->
        <div class="update-notice" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); position: relative; overflow: hidden;">
            <div style="position: absolute; top: -50%; right: -50%; width: 100%; height: 100%; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%); animation: pulse 3s infinite;"></div>
            <div style="position: relative; z-index: 1;">
                <h3 style="margin: 0 0 10px 0; display: flex; align-items: center; gap: 8px; font-size: 18px;">
                    <span style="font-size: 20px;">ğŸ‰</span>
                    <span>åŠŸèƒ½æ›´æ–°é€šçŸ¥</span>
                    <span style="background: rgba(255,255,255,0.2); padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: normal;">æœ€æ–°</span>
                </h3>
                <div style="font-size: 14px; line-height: 1.6; opacity: 0.95;">
                    <p style="margin: 8px 0; display: flex; align-items: flex-start; gap: 8px;">
                        <span style="color: #90EE90; font-weight: bold; min-width: 16px;">âœ…</span>
                        <span><strong>ä¼˜åŒ–ç•Œé¢ä½“éªŒï¼š</strong>ç§»é™¤äº†"æ¨¡æ‹Ÿå–ç‚¹åˆ†æ"åŠŸèƒ½ï¼Œç•Œé¢æ›´åŠ ç®€æ´ä¸“æ³¨</span>
                    </p>
                    <p style="margin: 8px 0; display: flex; align-items: flex-start; gap: 8px;">
                        <span style="color: #87CEEB; font-weight: bold; min-width: 16px;">ğŸ”§</span>
                        <span><strong>åŠŸèƒ½ç²¾ç®€ï¼š</strong>ä¸“æ³¨äºæ ¸å¿ƒçš„AIæé—®è¯ç”Ÿæˆå’Œäº§å“åˆ†æåŠŸèƒ½</span>
                    </p>
                    <p style="margin: 8px 0; display: flex; align-items: flex-start; gap: 8px;">
                        <span style="color: #FFB6C1; font-weight: bold; min-width: 16px;">ğŸ’¡</span>
                        <span><strong>ä½¿ç”¨å»ºè®®ï¼š</strong>å»ºè®®é…ç½®DeepSeek APIå¯†é’¥ä»¥è·å¾—æœ€ä½³çš„äº§å“åˆ†ææ•ˆæœ</span>
                    </p>
                </div>
            </div>
        </div>
        
        <!-- DeepSeek API é…ç½®åŒºåŸŸ -->
        <div class="api-config" style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #2196f3;">
            <h3 style="margin: 0 0 10px 0; color: #1976d2;">ğŸ¤– AIæ¨¡å‹é…ç½®</h3>
            <div style="margin-bottom: 15px;">
                <label for="aiModel" style="display: block; margin-bottom: 5px; font-weight: bold;">é€‰æ‹©AIæ¨¡å‹ï¼š</label>
                <select id="aiModel" onchange="onAiModelChange()" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; background: white;">
                    <option value="deepseek">DeepSeek (éœ€è¦APIå¯†é’¥)</option>
                </select>
            </div>
            <div id="deepseekConfig" style="margin-bottom: 10px;">
                        <label for="deepseekApiKey" style="display: block; margin-bottom: 5px; font-weight: bold;">API å¯†é’¥ï¼š</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="password" id="deepseekApiKey" placeholder="è¯·è¾“å…¥æ‚¨çš„DeepSeek APIå¯†é’¥ (sk-...)" 
                                   style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace;">
                            <button onclick="toggleApiKeyVisibility()" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; background: #f8f9fa; cursor: pointer;" title="æ˜¾ç¤º/éšè—å¯†é’¥">ğŸ‘ï¸</button>
                            <button onclick="saveApiKey()" style="padding: 8px 12px; border: 1px solid #28a745; border-radius: 4px; background: #28a745; color: white; cursor: pointer;" title="ä¿å­˜åˆ°æœ¬åœ°">ğŸ’¾</button>
                        </div>
                    </div>

            <div id="deepseekHelp" style="font-size: 12px; color: #666; line-height: 1.4;">
                <p style="margin: 5px 0;">ğŸ’¡ <strong>å¦‚ä½•è·å–APIå¯†é’¥ï¼š</strong></p>
                <p style="margin: 5px 0;">1. è®¿é—® <a href="https://platform.deepseek.com" target="_blank" style="color: #1976d2;">DeepSeekå¼€æ”¾å¹³å°</a></p>
                <p style="margin: 5px 0;">2. æ³¨å†Œè´¦å·å¹¶ç™»å½•</p>
                <p style="margin: 5px 0;">3. åœ¨APIå¯†é’¥ç®¡ç†é¡µé¢åˆ›å»ºæ–°çš„APIå¯†é’¥</p>
                <p style="margin: 5px 0;">4. å¤åˆ¶å¯†é’¥å¹¶ç²˜è´´åˆ°ä¸Šæ–¹è¾“å…¥æ¡†ä¸­ï¼Œç‚¹å‡»ä¿å­˜åˆ°æœ¬åœ°</p>
                <p style="margin: 5px 0;">5. å®Œæˆå®åè®¤è¯å¹¶å‰å¾€Deepseekè¿›è¡Œå……å€¼â€”â€”è´¹ç”¨çº¦ä¸º0.01/æ¬¡ (å®æµ‹ä½¿ç”¨ä¸€å‘¨ä»…<strong>0.05</strong>å…ƒ)<a href="https://platform.deepseek.com/top_up" target="_blank" style="color: #1976d2;">DeepSeekå……å€¼ä¸­å¿ƒ</a>
                <p style="margin: 5px 0;">ğŸ”’ <strong>éšç§ä¿æŠ¤ï¼š</strong>APIå¯†é’¥ä»…åœ¨æœ¬åœ°ä½¿ç”¨ï¼Œä¸ä¼šè¢«ä¿å­˜æˆ–ä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨</p>
            </div>
        </div>
        
        <div class="form-group">
            <label for="productName">* ä¸­æ–‡åç§°</label>
            <input type="text" id="productName" placeholder="è¯·è¾“å…¥äº§å“ä¸­æ–‡åç§°">
        </div>
        
        <div class="form-group">
            <label for="competitorLink">ç«å“é“¾æ¥åˆ†æ</label>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #17a2b8;">
                <h4 style="margin: 0 0 10px 0; color: #17a2b8;">ğŸŒ æ”¯æŒçš„å¹³å°</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 14px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span style="color: #007bff;">ğŸ›’</span>
                        <strong>OZON</strong> - ä¿„ç½—æ–¯ç”µå•†å¹³å°
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span style="color: #ff6900;">ğŸ­</span>
                        <strong>1688</strong> - é˜¿é‡Œå·´å·´æ‰¹å‘ç½‘
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span style="color: #e02e24;">ğŸ›ï¸</span>
                        <strong>æ‹¼å¤šå¤š</strong> - ä¸­å›½ç”µå•†å¹³å°
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span style="color: #ff4500;">ğŸ“¦</span>
                        <strong>æ·˜å®</strong> - é˜¿é‡Œå·´å·´é›¶å”®å¹³å°
                    </div>
                </div>
                <p style="margin: 10px 0 0 0; font-size: 12px; color: #666;">ğŸ’¡ æç¤ºï¼šå¯ä»¥åŒæ—¶è¾“å…¥å¤šä¸ªå¹³å°çš„é“¾æ¥è¿›è¡Œå¯¹æ¯”åˆ†æ</p>
            </div>
            
            <div id="linkInputs">
                <div class="link-input-container" style="margin-bottom: 10px;">
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <select class="platform-select" style="width: 120px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; background: white;">
                            <option value="auto">è‡ªåŠ¨è¯†åˆ«</option>
                            <option value="ozon">OZON</option>
                            <option value="1688">1688</option>
                            <option value="pdd">æ‹¼å¤šå¤š</option>
                            <option value="taobao">æ·˜å®</option>
                        </select>
                        <input type="text" class="competitor-link" placeholder="è¯·è¾“å…¥ç«å“é“¾æ¥ï¼ˆæ”¯æŒOZONã€1688ã€æ‹¼å¤šå¤šã€æ·˜å®ç­‰å¹³å°ï¼‰" style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        <button class="remove-link-btn" onclick="removeLinkInput(this)" style="padding: 8px 12px; border: 1px solid #dc3545; border-radius: 4px; background: #dc3545; color: white; cursor: pointer;" title="åˆ é™¤æ­¤é“¾æ¥">ğŸ—‘ï¸</button>
                    </div>
                    <div class="platform-info" style="font-size: 12px; color: #666; margin-top: 5px; display: none;"></div>
                </div>
            </div>
            
            <div style="margin-top: 10px;">
                <button class="btn" onclick="addLinkInput()" style="background: #28a745; margin-right: 10px;">â• æ·»åŠ æ›´å¤šé“¾æ¥</button>
                <button class="btn" onclick="analyzeCompetitor()" style="margin-right: 10px;">ğŸ” åˆ†æäº§å“å–ç‚¹</button>

            </div>
            
            <!-- åŠ è½½åŠ¨ç”»å®¹å™¨ -->
            <div id="loadingContainer" class="loading-container">
                <div class="loading-spinner"></div>
                <div class="loading-text" id="loadingText">æ­£åœ¨åˆ†æç«å“...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                </div>
                <div class="progress-steps">
                    <span class="step" id="step1">è·å–é“¾æ¥</span>
                    <span class="step" id="step2">è§£æå†…å®¹</span>
                    <span class="step" id="step3">AIåˆ†æ</span>
                    <span class="step" id="step4">ç”Ÿæˆç»“æœ</span>
                </div>
            </div>
        </div>
        
        <div class="form-group" id="competitorAnalysis" style="display: none;">
            <label>ç«å“åˆ†æç»“æœ</label>
            <div class="ai-prompt" id="competitorResult"></div>
        </div>
        
        <div class="form-group">
            <label>å•†å“ç‰¹å¾</label>

            <div id="features">
                <div class="feature-container">
                    <input type="text" class="feature-input" placeholder="è¯·è¾“å…¥å•†å“ç‰¹å¾æè¿°ï¼ˆä¸­æ–‡ï¼‰ï¼šå¦‚â€œå¯æŠ˜å â€ã€â€œè½»ä¾¿â€">
                    <button class="add-btn" onclick="addFeature()">+</button>
                </div>
            </div>
        </div>
        
        <!-- åœºæ™¯å›¾ç”ŸæˆåŠŸèƒ½ -->
        <div class="form-group" style="background: #f0f8ff; padding: 15px; border-radius: 8px; border-left: 4px solid #4169e1;">
            <h3 style="margin: 0 0 15px 0; color: #4169e1; display: flex; align-items: center; gap: 8px;">
                <span>ğŸ¨</span>
                <span>åœºæ™¯å›¾æç¤ºè¯ç”Ÿæˆ</span>
                <span style="background: rgba(65, 105, 225, 0.1); padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: normal;">æ–°åŠŸèƒ½</span>
            </h3>
            
            <div style="margin-bottom: 15px;">
                <label for="season" style="display: block; margin-bottom: 5px; font-weight: bold;">ç©¿ç€/ä½¿ç”¨å­£èŠ‚ï¼š</label>
                <select id="season" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; background: white;">
                    <option value="é€šç”¨">é€šç”¨</option>
                    <option value="æ˜¥å­£">æ˜¥å­£</option>
                    <option value="å¤å­£">å¤å­£</option>
                    <option value="ç§‹å­£">ç§‹å­£</option>
                    <option value="å†¬å­£">å†¬å­£</option>
                </select>
            </div>
            
            <div style="font-size: 12px; color: #666; line-height: 1.4; margin-bottom: 15px;">
                <p style="margin: 5px 0;">ğŸ’¡ <strong>åŠŸèƒ½è¯´æ˜ï¼š</strong></p>
                <p style="margin: 5px 0;">â€¢ åŸºäºäº§å“åç§°ã€ç‰¹å¾å’Œå­£èŠ‚ç”Ÿæˆä¸“ä¸šçš„åœºæ™¯å›¾æç¤ºè¯</p>
                <p style="margin: 5px 0;">â€¢ ç¬¦åˆä¿„ç½—æ–¯å®¡ç¾å’Œç°å®ç‰¹å¾çš„åœºæ™¯è®¾è®¡</p>
                <p style="margin: 5px 0;">â€¢ çªå‡ºäº§å“çš„æ ¸å¿ƒç‰¹å¾ï¼ˆå¦‚é˜²æ°´ã€æ˜“æ¸…æ´ç­‰ï¼‰</p>
                <p style="margin: 5px 0;">â€¢ ç”Ÿæˆçš„æ˜¯æç¤ºè¯ï¼Œä¸ç›´æ¥ç”Ÿæˆå›¾ç‰‡</p>
            </div>
            
            <div style="display: flex; gap: 10px; align-items: center;">
                <button class="btn" onclick="generateScenePrompt()" style="background: linear-gradient(135deg, #4169e1, #6a5acd);">ğŸ¨ ç”Ÿæˆåœºæ™¯å›¾æç¤ºè¯</button>
                <button class="btn" onclick="openTutorialVideo()" style="background: linear-gradient(135deg, #ff6b6b, #ee5a52); color: white; font-size: 14px;">ğŸ“¹ ä½¿ç”¨æ•™ç¨‹</button>
            </div>
        </div>
        
        <div class="button-group">
            <button class="btn" onclick="generatePrompt()">ç”Ÿæˆã€æ ‡é¢˜ã€ç®€ä»‹ã€å…³é”®è¯ã€æ ‡ç­¾ã€‘AIæé—®è¯</button>
            <button class="btn btn-secondary" onclick="clearForm()">æ¸…ç©º</button>
            <button class="btn btn-view" onclick="showDemo()">æŸ¥çœ‹è§†é¢‘æ¼”ç¤º</button>
        </div>
        
        <div class="result-area" id="resultArea" style="display: none;">
            <h3>AIæé—®è¯</h3>
            <div class="ai-prompt" id="aiPrompt"></div>
            
            <div class="button-group">
                <button class="btn" onclick="copyPrompt()">å¤åˆ¶AIæé—®è¯</button>
                <button class="btn btn-view" onclick="goToDeepseek()">å‰å¾€Deepseek</button>
            </div>
        </div>
        
        <!-- åœºæ™¯å›¾æç¤ºè¯ç»“æœåŒºåŸŸ -->
        <div class="result-area" id="sceneResultArea" style="display: none;">
            <h3 style="color: #4169e1; display: flex; align-items: center; gap: 8px;">
                <span>ğŸ¨</span>
                <span>åœºæ™¯å›¾æç¤ºè¯</span>
            </h3>
            <div class="ai-prompt" id="scenePrompt" style="background: linear-gradient(135deg, #f0f8ff, #e6f3ff); border-left: 4px solid #4169e1;"></div>
            
            <div class="button-group">
                <button class="btn" onclick="copyScenePrompt()" style="background: linear-gradient(135deg, #4169e1, #6a5acd);">å¤åˆ¶åœºæ™¯å›¾æç¤ºè¯</button>
                <button class="btn btn-view" onclick="goToDouBao()">å‰å¾€è±†åŒ…</button>
            </div>
            
            <!-- å•†å“å›¾ä½¿ç”¨æ•™ç¨‹ -->
            <div class="tutorial-section" style="margin-top: 20px; padding: 20px; background: linear-gradient(135deg, #f8f9ff, #e8f0ff); border-radius: 12px; border-left: 4px solid #4169e1;">
                <h4 style="color: #4169e1; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                    <span>ğŸ“š</span>
                    <span>å•†å“å›¾ç”Ÿæˆä½¿ç”¨æ•™ç¨‹</span>
                </h4>
                
                <div class="tutorial-steps" style="line-height: 1.8; color: #333;">
                    <div class="step-item" style="margin-bottom: 12px; padding: 10px; background: rgba(255,255,255,0.7); border-radius: 8px;">
                        <strong style="color: #4169e1;">ç¬¬ä¸€æ­¥ï¼š</strong> ä½¿ç”¨ä¸Šæ–¹åŠŸèƒ½ç”Ÿæˆåœºæ™¯æç¤ºè¯ï¼Œå¤åˆ¶ç”Ÿæˆçš„æç¤ºè¯å†…å®¹
                    </div>
                    
                    <div class="step-item" style="margin-bottom: 12px; padding: 10px; background: rgba(255,255,255,0.7); border-radius: 8px;">
                        <strong style="color: #4169e1;">ç¬¬äºŒæ­¥ï¼š</strong> æ–°å¼€é¡µé¢é€‰æ‹©"å›¾åƒç”Ÿæˆ"åŠŸèƒ½
                    </div>
                    
                    <div class="step-item" style="margin-bottom: 12px; padding: 10px; background: rgba(255,255,255,0.7); border-radius: 8px;">
                        <strong style="color: #4169e1;">ç¬¬ä¸‰æ­¥ï¼š</strong> é€‰æ‹©å‚è€ƒå›¾ï¼ˆå»ºè®®ä¸Šä¼ å¤šå¼ äº§å“å›¾ç‰‡ï¼Œè¶Šå¤šæ•ˆæœè¶Šå¥½ï¼‰
                    </div>
                    
                    <div class="step-item" style="margin-bottom: 12px; padding: 10px; background: rgba(255,255,255,0.7); border-radius: 8px;">
                        <strong style="color: #4169e1;">ç¬¬å››æ­¥ï¼š</strong> é€‰æ‹©æ¯”ä¾‹è®¾ç½®ä¸º <code style="background: #e8f0ff; padding: 2px 6px; border-radius: 4px; color: #4169e1;">1:1</code>ï¼ˆæ–¹å½¢æ¯”ä¾‹ï¼‰
                    </div>
                    
                    <div class="step-item" style="margin-bottom: 12px; padding: 10px; background: rgba(255,255,255,0.7); border-radius: 8px;">
                        <strong style="color: #4169e1;">ç¬¬äº”æ­¥ï¼š</strong> é€‰æ‹©é£æ ¼ä¸º <code style="background: #e8f0ff; padding: 2px 6px; border-radius: 4px; color: #4169e1;">äººåƒå†™çœŸ</code>ï¼ˆå½“å‰æµ‹è¯•æ¨èï¼‰
                    </div>
                    
                    <div class="step-item" style="margin-bottom: 12px; padding: 10px; background: rgba(255,255,255,0.7); border-radius: 8px;">
                        <strong style="color: #4169e1;">ç¬¬å…­æ­¥ï¼š</strong> åœ¨æç¤ºè¯æœ«å°¾åŠ ä¸Š"ç”ŸæˆèƒŒæ™¯ï¼Œå¹¶å°†äº§å“èå…¥"
                    </div>
                    
                    <div class="step-item" style="padding: 10px; background: rgba(65, 105, 225, 0.1); border-radius: 8px; border: 1px dashed #4169e1;">
                        <strong style="color: #4169e1;">ğŸ’¡ æç¤ºï¼š</strong> å®Œæˆä»¥ä¸Šæ­¥éª¤åç‚¹å‡»ç”Ÿæˆï¼Œå³å¯è·å¾—ä¸“ä¸šçš„å•†å“åœºæ™¯å›¾
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            Â© 2025 Made By Nicole. 
        </div>
    </div>
    </div>
    
    <div class="customer-service" onclick="showCustomerService()">
        <i class="fas fa-headset"></i>
    </div>
    
    <div id="toast" class="toast"></div>

    <script>
        function addFeature() {
            const featuresDiv = document.getElementById('features');
            const newFeature = document.createElement('div');
            newFeature.className = 'feature-container';
            newFeature.innerHTML = `
                <input type="text" class="feature-input" placeholder="è¯·è¾“å…¥å•†å“ç‰¹å¾æè¿°ï¼ˆä¸­æ–‡ï¼‰ï¼šå¦‚"å¯æŠ˜å "ã€"è½»ä¾¿"">
                <button class="remove-btn" onclick="removeFeature(this)">-</button>
                <button class="add-btn" onclick="addFeature()">+</button>
            `;
            featuresDiv.appendChild(newFeature);
        }
        
        function removeFeature(button) {
            const container = button.parentElement;
            container.remove();
        }



        function generatePrompt() {
            // ä¸ºç”ŸæˆæŒ‰é’®æ·»åŠ ç‰¹æ®ŠåŠ¨ç”»
            const generateBtn = event.target;
            generateBtn.classList.add('analyzing');
            generateBtn.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
                generateBtn.style.transform = 'scale(1)';
            }, 200);
            
            const productName = document.getElementById('productName').value.trim();
            if (!productName) {
                generateBtn.classList.remove('analyzing');
                showToast('âŒ è¯·è¾“å…¥äº§å“ä¸­æ–‡åç§°');
                return;
            }

            // æ”¶é›†æ‰€æœ‰é“¾æ¥
            const linkInputs = document.querySelectorAll('.competitor-link');
            const links = [];
            linkInputs.forEach(input => {
                const value = input.value.trim();
                if (value) {
                    links.push(value);
                }
            });
            const competitorLink = links.length > 0 ? links[0] : ''; // ä½¿ç”¨ç¬¬ä¸€ä¸ªé“¾æ¥ä½œä¸ºä¸»è¦å‚è€ƒ
            
            // è·å–æ‰€æœ‰ç‰¹å¾
            const featureInputs = document.querySelectorAll('.feature-input');
            const features = [];
            featureInputs.forEach(input => {
                const value = input.value.trim();
                if (value) {
                    features.push(value);
                }
            });

            // ç”ŸæˆAIæé—®è¯
            let prompt = `æˆ‘æ˜¯åšä¿„ç½—æ–¯OZONç”µå•†å¹³å°çš„è·¨å¢ƒå–å®¶ï¼ŒOZONæ˜¯è´§æ¶ç”µå•†å¹³å°ï¼Œæˆ‘æ­£åœ¨OZONå¹³å°ä¸Šæ¶ä¸€æ¬¾å•†å“ï¼Œå®ƒçš„ä¸­æ–‡åç§°æ˜¯ï¼š"${productName}"`;
            
            // å¤„ç†å¤šä¸ªé“¾æ¥
            if (links.length > 0) {
                if (links.length === 1) {
                    prompt += `ï¼Œè¿™æ¬¾å•†å“æœ‰ä¸€ä¸ªå‚è€ƒé“¾æ¥æ˜¯"${links[0]}"`;
                } else {
                    prompt += `ï¼Œè¿™æ¬¾å•†å“æœ‰${links.length}ä¸ªå‚è€ƒé“¾æ¥ï¼š`;
                    links.forEach((link, index) => {
                        prompt += `\n${index + 1}. ${link}`;
                    });
                }
            }
            
            if (features.length > 0) {
                prompt += `\n\nè¿™æ¬¾å•†å“æœ‰ä»¥ä¸‹ç‰¹å¾:`;
                features.forEach((feature, index) => {
                    prompt += `\n- ${feature}`;
                });
            }
            
            prompt += `\n\nè¯·ç»“åˆå•†å“çš„ä¸­æ–‡åç§°ã€å•†å“çš„ç‰¹å¾`;
            
            if (links.length > 0) {
                prompt += `ä»¥åŠå‚è€ƒé“¾æ¥ï¼ˆè¯·è§£æé“¾æ¥ä¸­çš„ä¿„æ–‡æ ‡é¢˜ä»¥åŠ"ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ"å±æ€§ä¸­çš„ä¿„æ–‡å•†å“æè¿°ï¼‰`;
            }
            
            prompt += `ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹è¯¦ç»†è¦æ±‚ç”Ÿæˆå®Œæ•´çš„äº§å“ä¿¡æ¯ï¼š\n\n` +
                `**1. äº§å“æ ‡é¢˜ï¼ˆä¿„æ–‡ï¼‰**\n` +
                `- è¦æ±‚ï¼šç®€æ´æœ‰åŠ›ï¼ŒåŒ…å«æ ¸å¿ƒå…³é”®è¯å’Œé•¿å°¾è¯\n` +
                `- é•¿åº¦ï¼šä¸è¶…è¿‡100ä¸ªå­—ç¬¦\n` +
                `- æ ¼å¼ï¼šç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ–¹å¼å±•ç¤ºä¿„æ–‡æ ‡é¢˜\n` +
                `- ä¸‹æ–¹æä¾›ä¸­æ–‡ç¿»è¯‘å¯¹ç…§\n\n` +
                `**2. äº§å“æè¿°ï¼ˆä¿„æ–‡ï¼‰**\n` +
                `- è¦æ±‚ï¼šè¯¦ç»†æè¿°äº§å“åŠŸèƒ½ã€ç‰¹ç‚¹ã€ä¼˜åŠ¿å’Œä½¿ç”¨åœºæ™¯\n` +
                `- é•¿åº¦ï¼šä¸å°‘äº300å­—ï¼Œä¸è¶…è¿‡500å­—\n` +
                `- å†…å®¹ï¼šçªå‡ºäº§å“å–ç‚¹ï¼Œé¿å…å…·ä½“å°ºå¯¸ä¿¡æ¯\n` +
                `- è¯­è¨€ï¼šç¬¦åˆä¿„ç½—æ–¯äººå£è¯­ä¹ æƒ¯ï¼ŒåŒ…å«é€‚å½“æ ‡ç‚¹ç¬¦å·\n` +
                `- æ ¼å¼ï¼šç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ–¹å¼å±•ç¤ºä¿„æ–‡æè¿°\n` +
                `- ä¸‹æ–¹æä¾›ä¸­æ–‡ç¿»è¯‘å¯¹ç…§\n\n` +
                `**3. äº§å“å…³é”®è¯ï¼ˆä¿„æ–‡ï¼‰**\n` +
                `- æ•°é‡ï¼š20-30ä¸ªå…³é”®è¯\n` +
                `- åˆ†éš”ï¼šå…³é”®è¯ä¹‹é—´ç”¨åˆ†å·(;)åˆ†éš”\n` +
                `- å†…å®¹ï¼šåŒ…å«äº§å“ç±»åˆ«ã€åŠŸèƒ½ã€æè´¨ã€é€‚ç”¨äººç¾¤ç­‰\n` +
                `- æ ¼å¼ï¼šç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ–¹å¼å±•ç¤ºä¿„æ–‡å…³é”®è¯\n` +
                `- ä¸‹æ–¹æä¾›ä¸­æ–‡ç¿»è¯‘å¯¹ç…§\n\n` +
                `**4. ä¸»é¢˜æ ‡ç­¾ï¼ˆä¿„æ–‡ï¼‰**\n` +
                `- æ•°é‡ï¼š25-28ä¸ªæ ‡ç­¾\n` +
                `- æ ¼å¼ï¼šæ¯ä¸ªæ ‡ç­¾ä»¥#å¼€å¤´ï¼ŒåªåŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿\n` +
                `- é•¿åº¦ï¼šæ¯ä¸ªæ ‡ç­¾æœ€å¤§28ä¸ªå­—ç¬¦\n` +
                `- å†…å®¹ï¼šæ¶µç›–é£æ ¼ã€ç”Ÿæ´»æ–¹å¼ã€ä½¿ç”¨åœºæ™¯ã€æµè¡Œè¶‹åŠ¿ç­‰\n` +
                `- ç¦æ­¢ï¼šå“ç‰Œåç§°ã€æ”¿ç­–ã€å†›äº‹ã€è¿ç¦å“ç›¸å…³è¯æ±‡\n` +
                `- åˆ†éš”ï¼šæ ‡ç­¾ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”\n` +
                `- æ ¼å¼ï¼šç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ–¹å¼å±•ç¤ºä¿„æ–‡æ ‡ç­¾\n` +
                `- ä¸‹æ–¹æä¾›ä¸­æ–‡ç¿»è¯‘å¯¹ç…§\n\n` +
                `**5. è¾“å‡ºæ ¼å¼è¦æ±‚**\n` +
                `- æ¯ä¸ªéƒ¨åˆ†éƒ½è¦æœ‰æ¸…æ™°çš„æ ‡é¢˜åˆ†éš”\n` +
                `- ä¿„æ–‡å†…å®¹ç”¨ä»£ç å—æ ¼å¼å±•ç¤ºï¼ˆæ¨¡æ‹Ÿæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰\n` +
                `- æ¯ä¸ªä¿„æ–‡éƒ¨åˆ†ä¸‹æ–¹éƒ½è¦æœ‰å¯¹åº”çš„ä¸­æ–‡ç¿»è¯‘\n` +
                `- ç¡®ä¿æ‰€æœ‰å†…å®¹ç¬¦åˆOZONå¹³å°è§„èŒƒå’Œä¿„ç½—æ–¯å¸‚åœºä¹ æƒ¯`;

            // æ˜¾ç¤ºç»“æœåŒºåŸŸå¹¶æ·»åŠ åŠ¨ç”»æ•ˆæœ
             const resultArea = document.getElementById('resultArea');
             const aiPrompt = document.getElementById('aiPrompt');
             
             // ç§»é™¤ç”ŸæˆæŒ‰é’®çš„åˆ†æåŠ¨ç”»
             generateBtn.classList.remove('analyzing');
             
             // ç›´æ¥æ˜¾ç¤ºå®Œæ•´å†…å®¹
             aiPrompt.textContent = prompt;
             resultArea.style.display = 'block';
             resultArea.classList.add('fade-in');
             
             showToast('âœ… AIæé—®è¯ç”Ÿæˆå®Œæˆï¼');
        }

        function showToast(message, duration = 2000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            
            // æ·»åŠ å›¾æ ‡åŠ¨ç”»
            if (message.includes('âœ…')) {
                toast.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
                toast.style.animation = 'slideInRight 0.5s ease, pulse 0.3s ease 0.5s';
            } else if (message.includes('âŒ')) {
                toast.style.background = 'linear-gradient(135deg, #f44336, #d32f2f)';
                toast.style.animation = 'shake 0.5s ease, slideInRight 0.5s ease';
            } else if (message.includes('ğŸ”') || message.includes('ğŸ­')) {
                toast.style.background = 'linear-gradient(135deg, #2196F3, #1976D2)';
                toast.style.animation = 'slideInRight 0.5s ease, pulse 2s infinite 1s';
            } else {
                toast.style.animation = 'slideInRight 0.5s ease';
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.5s ease';
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 500);
            }, duration);
        }
        
        function copyPrompt() {
            const promptText = document.getElementById('aiPrompt').textContent;
            navigator.clipboard.writeText(promptText)
                .then(() => showToast('âœ… AIæé—®è¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿'))
                .catch(err => showToast('âŒ å¤åˆ¶å¤±è´¥: ' + err));
        }

        function openTutorialVideo() {
            // åˆ›å»ºæ¨¡æ€å¼¹çª—
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease;
            `;
            
            // åˆ›å»ºè§†é¢‘å®¹å™¨
            const videoContainer = document.createElement('div');
            videoContainer.style.cssText = `
                position: relative;
                max-width: 90%;
                max-height: 90%;
                background: white;
                border-radius: 12px;
                padding: 20px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                animation: slideIn 0.3s ease;
            `;
            
            // åˆ›å»ºå…³é—­æŒ‰é’®
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = 'âœ•';
            closeBtn.style.cssText = `
                position: absolute;
                top: 10px;
                right: 15px;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: #666;
                z-index: 1;
            `;
            
            // åˆ›å»ºæ ‡é¢˜
            const title = document.createElement('h3');
            title.textContent = 'AIèƒŒæ™¯å›¾æç¤ºè¯ä½¿ç”¨æ•™ç¨‹';
            title.style.cssText = `
                margin: 0 0 15px 0;
                color: #333;
                text-align: center;
                font-size: 18px;
            `;
            
            // åˆ›å»ºè§†é¢‘å…ƒç´ 
            const video = document.createElement('video');
            video.src = '../videos/sp.mp4';
            video.controls = true;
            video.style.cssText = `
                width: 100%;
                max-width: 800px;
                height: auto;
                border-radius: 8px;
            `;
            
            // åˆ›å»ºæç¤ºä¿¡æ¯
            const tip = document.createElement('p');
            tip.textContent = 'ğŸ’¡ æç¤ºï¼šç‚¹å‡»èƒŒæ™¯æˆ–æŒ‰ESCé”®å¯å…³é—­è§†é¢‘';
            tip.style.cssText = `
                margin: 15px 0 0 0;
                text-align: center;
                color: #666;
                font-size: 14px;
            `;
            
            // ç»„è£…å…ƒç´ 
            videoContainer.appendChild(closeBtn);
            videoContainer.appendChild(title);
            videoContainer.appendChild(video);
            videoContainer.appendChild(tip);
            modal.appendChild(videoContainer);
            
            // æ·»åŠ æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideIn {
                    from { transform: scale(0.8) translateY(-20px); opacity: 0; }
                    to { transform: scale(1) translateY(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            // å…³é—­å‡½æ•°
            const closeModal = () => {
                modal.style.animation = 'fadeIn 0.3s ease reverse';
                setTimeout(() => {
                    document.body.removeChild(modal);
                    document.head.removeChild(style);
                }, 300);
            };
            
            // ç»‘å®šäº‹ä»¶
            closeBtn.onclick = closeModal;
            modal.onclick = (e) => {
                if (e.target === modal) closeModal();
            };
            
            // ESCé”®å…³é—­
            const handleEsc = (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                    document.removeEventListener('keydown', handleEsc);
                }
            };
            document.addEventListener('keydown', handleEsc);
            
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(modal);
            
            // æ˜¾ç¤ºæˆåŠŸæç¤º
            showToast('ğŸ“¹ è§†é¢‘æ•™ç¨‹å·²æ‰“å¼€');
        }

        function goToDeepseek() {
            window.open('https://chat.deepseek.com/', '_blank');
        }
        
        function showDemo() {
            alert('è§†é¢‘æ¼”ç¤ºåŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­');
        }

        function showCustomerService() {
            alert('è”ç³»æˆ‘ä»¬ï¼š\né‚®ç®±ï¼šzouqifeng@jiawae-commerce.com\nå·¥ä½œæ—¶é—´ï¼šå‘¨ä¸€è‡³å‘¨äº” 9:00-18:00');
        }

        // å¹³å°æ£€æµ‹åŠŸèƒ½
        function detectPlatform(url) {
            if (!url) return 'unknown';
            
            const lowerUrl = url.toLowerCase();
            
            if (lowerUrl.includes('ozon.ru')) return 'ozon';
            if (lowerUrl.includes('1688.com')) return '1688';
            if (lowerUrl.includes('yangkeduo.com') || lowerUrl.includes('pinduoduo.com')) return 'pdd';
            if (lowerUrl.includes('taobao.com') || lowerUrl.includes('tmall.com')) return 'taobao';
            
            return 'unknown';
        }

        // è·å–å¹³å°ä¿¡æ¯
        function getPlatformInfo(platform) {
            const platformData = {
                'ozon': { name: 'OZON', icon: 'ğŸ›’', color: '#007bff', description: 'ä¿„ç½—æ–¯ç”µå•†å¹³å°' },
                '1688': { name: '1688', icon: 'ğŸ­', color: '#ff6900', description: 'é˜¿é‡Œå·´å·´æ‰¹å‘ç½‘' },
                'pdd': { name: 'æ‹¼å¤šå¤š', icon: 'ğŸ›ï¸', color: '#e02e24', description: 'ä¸­å›½ç”µå•†å¹³å°' },
                'taobao': { name: 'æ·˜å®', icon: 'ğŸ“¦', color: '#ff4500', description: 'é˜¿é‡Œå·´å·´é›¶å”®å¹³å°' },
                'unknown': { name: 'æœªçŸ¥å¹³å°', icon: 'â“', color: '#6c757d', description: 'æ— æ³•è¯†åˆ«çš„å¹³å°' }
            };
            return platformData[platform] || platformData['unknown'];
        }

        // æ·»åŠ é“¾æ¥è¾“å…¥æ¡†
        function addLinkInput() {
            const container = document.getElementById('linkInputs');
            const newInput = document.createElement('div');
            newInput.className = 'link-input-container';
            newInput.style.marginBottom = '10px';
            
            newInput.innerHTML = `
                <div style="display: flex; gap: 10px; align-items: center;">
                    <select class="platform-select" style="width: 120px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; background: white;">
                        <option value="auto">è‡ªåŠ¨è¯†åˆ«</option>
                        <option value="ozon">OZON</option>
                        <option value="1688">1688</option>
                        <option value="pdd">æ‹¼å¤šå¤š</option>
                        <option value="taobao">æ·˜å®</option>
                    </select>
                    <input type="text" class="competitor-link" placeholder="è¯·è¾“å…¥ç«å“é“¾æ¥ï¼ˆæ”¯æŒOZONã€1688ã€æ‹¼å¤šå¤šã€æ·˜å®ç­‰å¹³å°ï¼‰" style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <button class="remove-link-btn" onclick="removeLinkInput(this)" style="padding: 8px 12px; border: 1px solid #dc3545; border-radius: 4px; background: #dc3545; color: white; cursor: pointer;" title="åˆ é™¤æ­¤é“¾æ¥">ğŸ—‘ï¸</button>
                </div>
                <div class="platform-info" style="font-size: 12px; color: #666; margin-top: 5px; display: none;"></div>
            `;
            
            container.appendChild(newInput);
            
            // ä¸ºæ–°æ·»åŠ çš„è¾“å…¥æ¡†ç»‘å®šäº‹ä»¶
            const linkInput = newInput.querySelector('.competitor-link');
            const platformSelect = newInput.querySelector('.platform-select');
            const platformInfo = newInput.querySelector('.platform-info');
            
            linkInput.addEventListener('input', function() {
                updatePlatformInfo(this, platformSelect, platformInfo);
            });
            
            platformSelect.addEventListener('change', function() {
                updatePlatformInfo(linkInput, this, platformInfo);
            });
        }

        // åˆ é™¤é“¾æ¥è¾“å…¥æ¡†
        function removeLinkInput(button) {
            const container = document.getElementById('linkInputs');
            if (container.children.length > 1) {
                button.closest('.link-input-container').remove();
            } else {
                showToast('è‡³å°‘éœ€è¦ä¿ç•™ä¸€ä¸ªé“¾æ¥è¾“å…¥æ¡†');
            }
        }

        // æ›´æ–°å¹³å°ä¿¡æ¯æ˜¾ç¤º
        function updatePlatformInfo(linkInput, platformSelect, platformInfo) {
            const url = linkInput.value.trim();
            let platform = platformSelect.value;
            
            if (platform === 'auto' && url) {
                platform = detectPlatform(url);
            }
            
            if (url && platform !== 'unknown') {
                const info = getPlatformInfo(platform);
                platformInfo.innerHTML = `${info.icon} æ£€æµ‹åˆ°ï¼š<strong style="color: ${info.color};">${info.name}</strong> - ${info.description}`;
                platformInfo.style.display = 'block';
                linkInput.style.borderColor = info.color;
            } else if (url && platform === 'unknown') {
                platformInfo.innerHTML = 'â“ æ— æ³•è¯†åˆ«å¹³å°ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æˆ–æ£€æŸ¥é“¾æ¥æ ¼å¼';
                platformInfo.style.display = 'block';
                linkInput.style.borderColor = '#dc3545';
            } else {
                platformInfo.style.display = 'none';
                linkInput.style.borderColor = '#ddd';
            }
        }

        // æ”¶é›†æ‰€æœ‰é“¾æ¥
        function collectAllLinks() {
            const containers = document.querySelectorAll('.link-input-container');
            const links = [];
            
            containers.forEach(container => {
                const linkInput = container.querySelector('.competitor-link');
                const platformSelect = container.querySelector('.platform-select');
                const url = linkInput.value.trim();
                
                if (url) {
                    let platform = platformSelect.value;
                    if (platform === 'auto') {
                        platform = detectPlatform(url);
                    }
                    
                    links.push({
                        url: url,
                        platform: platform,
                        platformInfo: getPlatformInfo(platform)
                    });
                }
            });
            
            return links;
        }

        async function analyzeCompetitor() {
            const links = collectAllLinks();
            
            if (links.length === 0) {
                alert('è¯·å…ˆè¾“å…¥è‡³å°‘ä¸€ä¸ªç«å“é“¾æ¥');
                return;
            }

            // æ”¯æŒå¤šå¹³å°åˆ†æ
            await analyzeMultiPlatformCompetitor(links);
        }
        
        async function analyzeMultiPlatformCompetitor(links) {
            // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
            showLoadingAnimation();
            
            try {
                // è°ƒç”¨DeepSeek APIåˆ†æå¤šå¹³å°ç«å“
                const analysisResult = await callMultiPlatformDeepSeekAPI(links);
                
                // éšè—åŠ è½½åŠ¨ç”»
                hideLoadingAnimation();
                
                // æ˜¾ç¤ºç»“æœå¹¶æ·»åŠ åŠ¨ç”»æ•ˆæœ
                const resultElement = document.getElementById('competitorResult');
                resultElement.innerHTML = analysisResult;
                resultElement.classList.add('fade-in');
                const analysisSection = document.getElementById('competitorAnalysis');
                analysisSection.style.display = 'block';
                setTimeout(() => {
                    analysisSection.classList.add('show');
                }, 100);
                
                // è‡ªåŠ¨å¡«å……åˆ†æå‡ºçš„ç‰¹å¾åˆ°å•†å“ç‰¹å¾ä¸­
                autoFillFeaturesFromAI(analysisResult);
                
                showToast(`âœ… æˆåŠŸåˆ†æäº†${links.length}ä¸ªäº§å“çš„å–ç‚¹ä¿¡æ¯ï¼`);
            } catch (error) {
                hideLoadingAnimation();
                showToast('âŒ äº§å“åˆ†æå¤±è´¥: ' + error.message + '\nğŸ’¡ å»ºè®®ï¼šåˆ‡æ¢åˆ°æ¨¡æ‹Ÿå–ç‚¹åˆ†æï¼ˆå…è´¹ï¼‰');
                console.error('äº§å“åˆ†æAPIè°ƒç”¨å¤±è´¥:', error);
            }
        }
        
        async function analyzeDeepSeekCompetitor(competitorLink) {
            // å…¼å®¹æ—§ç‰ˆæœ¬çš„å•é“¾æ¥åˆ†æ
            const links = [{
                url: competitorLink,
                platform: detectPlatform(competitorLink),
                platformInfo: getPlatformInfo(detectPlatform(competitorLink))
            }];
            
            await analyzeMultiPlatformCompetitor(links);
        }
        

         
         // å¤šå¹³å°APIè°ƒç”¨å‡½æ•°
         async function callMultiPlatformDeepSeekAPI(links) {
             // DeepSeek API é…ç½®
             const API_KEY = document.getElementById('deepseekApiKey')?.value?.trim() || '';
             
             if (!API_KEY || API_KEY === 'sk-your-deepseek-api-key') {
                 throw new Error('è¯·å…ˆåœ¨é¡µé¢é¡¶éƒ¨è®¾ç½®æ‚¨çš„DeepSeek APIå¯†é’¥');
             }
             const API_URL = 'https://api.deepseek.com/v1/chat/completions';
             
             // æ„å»ºäº§å“å–ç‚¹åˆ†ææç¤ºè¯
             let prompt = 'è¯·åˆ†æä»¥ä¸‹äº§å“é“¾æ¥ï¼Œé‡ç‚¹å…³æ³¨äº§å“æœ¬èº«çš„ç‰¹ç‚¹å’Œå–ç‚¹ï¼š\n\n';
             
             // æ£€æŸ¥æ˜¯å¦æœ‰OZONé“¾æ¥
             const ozonLinks = links.filter(link => link.platform === 'ozon');
             const otherLinks = links.filter(link => link.platform !== 'ozon');
             
             // ä¼˜å…ˆæ˜¾ç¤ºOZONé“¾æ¥
             if (ozonLinks.length > 0) {
                 prompt += 'ğŸ¯ ä¸»è¦å‚è€ƒäº§å“ï¼ˆOZONï¼‰ï¼š\n';
                 ozonLinks.forEach((link, index) => {
                     prompt += `${index + 1}. ${link.url}\n`;
                 });
             }
             
             if (otherLinks.length > 0) {
                 prompt += ozonLinks.length > 0 ? '\nğŸ“‹ è¡¥å……å‚è€ƒäº§å“ï¼š\n' : '';
                 otherLinks.forEach((link, index) => {
                     const startIndex = ozonLinks.length > 0 ? ozonLinks.length + 1 : 1;
                     prompt += `${startIndex + index}. ${link.url}\n`;
                 });
             }
             
             prompt += `\nåˆ†æè¦æ±‚ï¼š\n${ozonLinks.length > 0 ? '- è¯·ä»¥OZONäº§å“ç‰¹å¾ä¸ºä¸»è¦åˆ†æå¯¹è±¡\n- å…¶ä»–å¹³å°äº§å“ä½œä¸ºè¡¥å……å‚è€ƒå’Œå¯¹æ¯”\n' : ''}è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š\n1. äº§å“çš„æ ¸å¿ƒåŠŸèƒ½å’Œç‰¹ç‚¹${ozonLinks.length > 0 ? 'ï¼ˆä»¥OZONä¸ºå‡†ï¼‰' : ''}\n2. ä¸»è¦å–ç‚¹å’Œä¼˜åŠ¿\n3. äº§å“æè´¨ã€å·¥è‰ºæˆ–æŠ€æœ¯ç‰¹è‰²\n4. é€‚ç”¨åœºæ™¯å’Œç›®æ ‡ç”¨æˆ·\n5. å…³é”®è¯å»ºè®®ï¼ˆåŒ…å«äº§å“ç‰¹å¾è¯ï¼‰\n6. å¦‚æœæœ‰å¤šä¸ªäº§å“ï¼Œè¯·ç»¼åˆåˆ†æå…±åŒç‰¹ç‚¹å’Œå·®å¼‚\n\nè¯·ç”¨ç®€æ´æ˜äº†çš„ä¸­æ–‡å›ç­”ï¼Œé‡ç‚¹çªå‡ºäº§å“çš„æ ¸å¿ƒå–ç‚¹ã€‚`;
             
             const requestBody = {
                 model: "deepseek-chat",
                 messages: [
                     {
                         role: "system",
                         content: "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„äº§å“åˆ†æå¸ˆï¼Œæ“…é•¿åˆ†æç”µå•†äº§å“çš„æ ¸å¿ƒç‰¹ç‚¹ã€å–ç‚¹å’Œä¼˜åŠ¿ã€‚å½“åˆ†æå¤šä¸ªå¹³å°çš„äº§å“æ—¶ï¼Œè¯·ä»¥OZONå¹³å°çš„äº§å“ç‰¹å¾ä¸ºä¸»è¦å‚è€ƒæ ‡å‡†ï¼Œå…¶ä»–å¹³å°äº§å“ä½œä¸ºè¡¥å……ä¿¡æ¯ã€‚ä¸“æ³¨äºäº§å“æœ¬èº«çš„ç‰¹å¾åˆ†æï¼Œè€Œä¸æ˜¯å¹³å°ç‰¹è‰²åˆ†æã€‚"
                     },
                     {
                         role: "user",
                         content: prompt
                     }
                 ],
                 temperature: 0.7,
                 max_tokens: 1500
             };
             
             try {
                 const response = await fetch(API_URL, {
                     method: 'POST',
                     headers: {
                         'Content-Type': 'application/json',
                         'Authorization': `Bearer ${API_KEY}`
                     },
                     body: JSON.stringify(requestBody)
                 });
                 
                 if (!response.ok) {
                     const errorData = await response.json();
                     throw new Error(errorData.error?.message || `HTTP ${response.status}`);
                 }
                 
                 const data = await response.json();
                 const analysis = data.choices[0].message.content;
                 
                 // æ ¼å¼åŒ–æ˜¾ç¤ºç»“æœ
                 let resultHtml = `<h4 class="result-item typewriter">ğŸ¤– AIäº§å“å–ç‚¹åˆ†æç»“æœï¼š</h4>`;
                 
                 // æ˜¾ç¤ºåˆ†æçš„äº§å“ä¿¡æ¯
                 if (links.length > 1) {
                     const ozonCount = links.filter(link => link.platform === 'ozon').length;
                     const otherCount = links.length - ozonCount;
                     
                     resultHtml += `<div class="result-item" style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #007bff;">`;
                     resultHtml += `<h5 style="margin: 0 0 10px 0; color: #007bff;">ğŸ“Š åˆ†æäº§å“æ¦‚è§ˆ</h5>`;
                     resultHtml += `<p style="margin: 5px 0;">å…±åˆ†æ <strong>${links.length}</strong> ä¸ªäº§å“é“¾æ¥`;
                     if (ozonCount > 0) {
                         resultHtml += `ï¼Œå…¶ä¸­OZONäº§å“ <strong>${ozonCount}</strong> ä¸ªï¼ˆä¸»è¦å‚è€ƒï¼‰`;
                         if (otherCount > 0) {
                             resultHtml += `ï¼Œå…¶ä»–å¹³å° <strong>${otherCount}</strong> ä¸ªï¼ˆè¡¥å……å‚è€ƒï¼‰`;
                         }
                     } else {
                         resultHtml += `ï¼Œæ¥è‡ªä¸åŒå¹³å°`;
                     }
                     resultHtml += `</p>`;
                     resultHtml += `</div>`;
                 }
                 
                 // æ˜¾ç¤ºAIåˆ†æç»“æœ
                 resultHtml += `<div class="result-item" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #28a745;">`;
                 resultHtml += `<div style="white-space: pre-wrap;">${analysis}</div>`;
                 resultHtml += `</div>`;
                 
                 resultHtml += `<hr class="result-item">`;
                 resultHtml += `<p class="result-item"><strong>ğŸ’¡ æç¤ºï¼š</strong>AIåˆ†æç»“æœå·²è‡ªåŠ¨å¡«å……åˆ°å•†å“ç‰¹å¾ä¸­ï¼Œæ‚¨å¯ä»¥æ ¹æ®å®é™…äº§å“æƒ…å†µè¿›è¡Œè°ƒæ•´ã€‚</p>`;
                 
                 return resultHtml;
                 
             } catch (error) {
                 console.error('APIè°ƒç”¨å¤±è´¥:', error);
                 throw error;
             }
         }

         // å¤šå¹³å°æ¨¡æ‹Ÿåˆ†æå‡½æ•°
         async function generateMultiPlatformMockAnalysis(links) {
             // åŸºäºé“¾æ¥å†…å®¹æ™ºèƒ½ç”Ÿæˆæ¨¡æ‹Ÿåˆ†æç»“æœ
             const mockAnalysisTemplates = {
                 electronics: {
                     keywords: ['Ğ½Ğ°ÑƒÑˆĞ½Ğ¸ĞºĞ¸', 'bluetooth', 'Ğ±ĞµÑĞ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ½Ñ‹Ğµ', 'Ğ·Ğ°Ñ€ÑĞ´ĞºĞ°', 'ÑĞ¼Ğ°Ñ€Ñ‚Ñ„Ğ¾Ğ½', 'è“ç‰™è€³æœº', 'æ— çº¿å……ç”µ'],
                     features: ['æ— çº¿è¿æ¥', 'è“ç‰™æŠ€æœ¯', 'å¿«é€Ÿå……ç”µ', 'é•¿ç»­èˆª', 'é«˜éŸ³è´¨', 'é™å™ªåŠŸèƒ½'],
                     title: 'Ğ‘ĞµÑĞ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ½Ğ°ÑƒÑˆĞ½Ğ¸ĞºĞ¸ Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼ ÑˆÑƒĞ¼Ğ¾Ğ¿Ğ¾Ğ´Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼',
                     description: 'é«˜å“è´¨æ— çº¿è€³æœºï¼Œé‡‡ç”¨å…ˆè¿›çš„è“ç‰™æŠ€æœ¯å’Œä¸»åŠ¨é™å™ªåŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æä¾›å“è¶Šçš„éŸ³è´¨ä½“éªŒå’Œèˆ’é€‚çš„ä½©æˆ´æ„Ÿå—ã€‚'
                 },
                 fashion: {
                     keywords: ['Ğ¾Ğ´ĞµĞ¶Ğ´Ğ°', 'Ğ¼Ğ¾Ğ´Ğ°', 'ÑÑ‚Ğ¸Ğ»ÑŒ', 'ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾', 'ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚', 'æ—¶å°š', 'æœè£…'],
                     features: ['æ—¶å°šè®¾è®¡', 'èˆ’é€‚é¢æ–™', 'å¤šè‰²å¯é€‰', 'ç™¾æ­æ¬¾å¼', 'ä¼˜è´¨åšå·¥', 'é€æ°”æ€§å¥½'],
                     title: 'Ğ¡Ñ‚Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ´ĞµĞ¶Ğ´Ğ° Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ³Ğ¾ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°',
                     description: 'æ—¶å°šæœè£…ï¼Œé‡‡ç”¨ä¼˜è´¨é¢æ–™åˆ¶ä½œï¼Œè®¾è®¡ç®€çº¦å¤§æ–¹ï¼Œé€‚åˆå¤šç§åœºåˆç©¿ç€ï¼Œå±•ç°ä¸ªäººå“å‘³å’Œé£æ ¼ã€‚'
                 },
                 home: {
                     keywords: ['Ğ´Ğ¾Ğ¼', 'ĞºÑƒÑ…Ğ½Ñ', 'ÑƒĞ´Ğ¾Ğ±ÑÑ‚Ğ²Ğ¾', 'Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ', 'ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾', 'å®¶å±…', 'å¨æˆ¿'],
                     features: ['å®ç”¨è®¾è®¡', 'è€ç”¨æè´¨', 'æ˜“äºæ¸…æ´', 'èŠ‚çœç©ºé—´', 'å¤šåŠŸèƒ½', 'å®‰å…¨å¯é '],
                     title: 'ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ¼Ğ°',
                     description: 'å®ç”¨çš„å®¶å±…ç”¨å“ï¼Œè®¾è®¡äººæ€§åŒ–ï¼Œæè´¨å®‰å…¨è€ç”¨ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæå‡ç”Ÿæ´»å“è´¨å’Œä¾¿åˆ©æ€§ã€‚'
                 },
                 beauty: {
                     keywords: ['ĞºÑ€Ğ°ÑĞ¾Ñ‚Ğ°', 'ÑƒÑ…Ğ¾Ğ´', 'ĞºĞ¾ÑĞ¼ĞµÑ‚Ğ¸ĞºĞ°', 'Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ', 'Ğ½Ğ°Ñ‚ÑƒÑ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹', 'ç¾å®¹', 'æŠ¤è‚¤'],
                     features: ['å¤©ç„¶æˆåˆ†', 'æ¸©å’Œé…æ–¹', 'æ·±å±‚æ»‹å…»', 'å¿«é€Ÿå¸æ”¶', 'æŒä¹…æ•ˆæœ', 'é€‚åˆæ•æ„Ÿè‚Œ'],
                     title: 'ĞĞ°Ñ‚ÑƒÑ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ¾ÑĞ¼ĞµÑ‚Ğ¸ĞºĞ° Ğ´Ğ»Ñ ÑƒÑ…Ğ¾Ğ´Ğ°',
                     description: 'å¤©ç„¶æŠ¤è‚¤äº§å“ï¼Œé‡‡ç”¨æ¸©å’Œé…æ–¹ï¼Œå¯Œå«è¥å…»æˆåˆ†ï¼Œèƒ½å¤Ÿæ·±å±‚æ»‹å…»è‚Œè‚¤ï¼Œå¸¦æ¥å¥åº·ç¾ä¸½çš„è‚Œè‚¤çŠ¶æ€ã€‚'
                 },
                 sports: {
                     keywords: ['ÑĞ¿Ğ¾Ñ€Ñ‚', 'Ñ„Ğ¸Ñ‚Ğ½ĞµÑ', 'Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°', 'Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ', 'Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ', 'è¿åŠ¨', 'å¥èº«'],
                     features: ['ä¸“ä¸šè®¾è®¡', 'è€ç£¨è€ç”¨', 'é€æ°”æ’æ±—', 'èˆ’é€‚è´´åˆ', 'è¿åŠ¨ä¿æŠ¤', 'æ—¶å°šå¤–è§‚'],
                     title: 'Ğ¡Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ğ´Ğ»Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ° Ğ¶Ğ¸Ğ·Ğ½Ğ¸',
                     description: 'ä¸“ä¸šè¿åŠ¨ç”¨å“ï¼Œé‡‡ç”¨å…ˆè¿›ææ–™å’Œäººä½“å·¥å­¦è®¾è®¡ï¼Œä¸ºè¿åŠ¨çˆ±å¥½è€…æä¾›æœ€ä½³çš„è¿åŠ¨ä½“éªŒå’Œä¿æŠ¤ã€‚'
                 }
             };
             
             // åˆ†ææ‰€æœ‰é“¾æ¥ï¼Œé€‰æ‹©æœ€åˆé€‚çš„æ¨¡æ¿
             let selectedTemplate = mockAnalysisTemplates.electronics; // é»˜è®¤
             let templateScore = { electronics: 0, fashion: 0, home: 0, beauty: 0, sports: 0 };
             
             links.forEach(link => {
                 const linkLower = link.url.toLowerCase();
                 
                 if (linkLower.includes('Ğ¾Ğ´ĞµĞ¶Ğ´Ğ°') || linkLower.includes('Ğ¼Ğ¾Ğ´Ğ°') || linkLower.includes('fashion') || linkLower.includes('æœè£…')) {
                     templateScore.fashion++;
                 } else if (linkLower.includes('Ğ´Ğ¾Ğ¼') || linkLower.includes('ĞºÑƒÑ…Ğ½Ñ') || linkLower.includes('home') || linkLower.includes('å®¶å±…')) {
                     templateScore.home++;
                 } else if (linkLower.includes('ĞºÑ€Ğ°ÑĞ¾Ñ‚Ğ°') || linkLower.includes('ĞºĞ¾ÑĞ¼ĞµÑ‚Ğ¸ĞºĞ°') || linkLower.includes('beauty') || linkLower.includes('ç¾å®¹')) {
                     templateScore.beauty++;
                 } else if (linkLower.includes('ÑĞ¿Ğ¾Ñ€Ñ‚') || linkLower.includes('Ñ„Ğ¸Ñ‚Ğ½ĞµÑ') || linkLower.includes('sport') || linkLower.includes('è¿åŠ¨')) {
                     templateScore.sports++;
                 } else {
                     templateScore.electronics++;
                 }
             });
             
             // é€‰æ‹©å¾—åˆ†æœ€é«˜çš„æ¨¡æ¿
             const maxScore = Math.max(...Object.values(templateScore));
             const bestTemplate = Object.keys(templateScore).find(key => templateScore[key] === maxScore);
             selectedTemplate = mockAnalysisTemplates[bestTemplate];
             
             // æ„å»ºç»“æœHTML
             let resultHtml = `<h4 class="result-item typewriter">ğŸ­ äº§å“å–ç‚¹æ¨¡æ‹Ÿåˆ†æç»“æœï¼š</h4>`;
             
             // æ˜¾ç¤ºåˆ†æçš„äº§å“ä¿¡æ¯
             if (links.length > 1) {
                 const ozonCount = links.filter(link => link.platform === 'ozon').length;
                 const otherCount = links.length - ozonCount;
                 
                 resultHtml += `<div class="result-item" style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #007bff;">`;
                 resultHtml += `<h5 style="margin: 0 0 10px 0; color: #007bff;">ğŸ“Š åˆ†æäº§å“æ¦‚è§ˆ</h5>`;
                 resultHtml += `<p style="margin: 5px 0;">å…±åˆ†æ <strong>${links.length}</strong> ä¸ªäº§å“é“¾æ¥`;
                 if (ozonCount > 0) {
                     resultHtml += `ï¼Œå…¶ä¸­OZONäº§å“ <strong>${ozonCount}</strong> ä¸ªï¼ˆä¸»è¦å‚è€ƒï¼‰`;
                     if (otherCount > 0) {
                         resultHtml += `ï¼Œå…¶ä»–å¹³å° <strong>${otherCount}</strong> ä¸ªï¼ˆè¡¥å……å‚è€ƒï¼‰`;
                     }
                 }
                 resultHtml += `</p>`;
                 resultHtml += `</div>`;
             }
             
             // æ˜¾ç¤ºæ¨¡æ‹Ÿåˆ†æç»“æœ
             resultHtml += `<div class="result-item" style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #ffc107;">`;
             resultHtml += `<p><strong>ğŸ“ ç»¼åˆäº§å“æ ‡é¢˜ï¼š</strong>${selectedTemplate.title}</p>`;
             resultHtml += `<p><strong>ğŸ¯ ä¸»è¦å–ç‚¹ï¼š</strong>${selectedTemplate.features.join('ã€')}</p>`;
             resultHtml += `<p><strong>ğŸ“‹ äº§å“æè¿°ï¼š</strong>${selectedTemplate.description}</p>`;
             resultHtml += `<p><strong>ğŸ” å…³é”®è¯å»ºè®®ï¼š</strong>${selectedTemplate.keywords.join(', ')}</p>`;
             
             // äº§å“åº”ç”¨åœºæ™¯åˆ†æ
             if (links.length > 1) {
                 resultHtml += `<hr style="margin: 15px 0;">`;
                 resultHtml += `<h6 style="color: #ffc107; margin: 10px 0;">ğŸ¯ äº§å“åº”ç”¨å»ºè®®ï¼š</h6>`;
                 resultHtml += `<p style="margin: 5px 0; font-size: 14px;">â€¢ <strong>æ ¸å¿ƒå–ç‚¹ï¼š</strong>${selectedTemplate.features.slice(0, 3).join('ã€')}</p>`;
                 resultHtml += `<p style="margin: 5px 0; font-size: 14px;">â€¢ <strong>é€‚ç”¨åœºæ™¯ï¼š</strong>æ—¥å¸¸ä½¿ç”¨ã€ç¤¼å“èµ é€ã€ä¸“ä¸šéœ€æ±‚</p>`;
                 resultHtml += `<p style="margin: 5px 0; font-size: 14px;">â€¢ <strong>ç›®æ ‡ç”¨æˆ·ï¼š</strong>æ³¨é‡å“è´¨å’Œå®ç”¨æ€§çš„æ¶ˆè´¹è€…</p>`;
             }
             
             resultHtml += `</div>`;
             
             resultHtml += `<div class="result-item" style="background: #d1ecf1; padding: 10px; border-radius: 6px; margin: 10px 0; font-size: 12px;">`;
             resultHtml += `<p><strong>â„¹ï¸ è¯´æ˜ï¼š</strong>è¿™æ˜¯åŸºäº${links.length}ä¸ªäº§å“é“¾æ¥çš„æ¨¡æ‹Ÿåˆ†æç»“æœï¼Œä¸“æ³¨äºäº§å“å–ç‚¹åˆ†æã€‚å»ºè®®é…ç½®DeepSeek APIå¯†é’¥ä»¥è·å¾—æ›´å‡†ç¡®çš„åˆ†æã€‚</p>`;
             resultHtml += `</div>`;
             
             resultHtml += `<hr class="result-item">`;
             resultHtml += `<p class="result-item"><strong>ğŸ’¡ æç¤ºï¼š</strong>äº§å“å–ç‚¹åˆ†æç»“æœå·²è‡ªåŠ¨å¡«å……åˆ°å•†å“ç‰¹å¾ä¸­ï¼Œæ‚¨å¯ä»¥æ ¹æ®å®é™…äº§å“æƒ…å†µè¿›è¡Œè°ƒæ•´ã€‚</p>`;
             
             return resultHtml;
         }

         async function generateMockAnalysis(competitorLink) {
             // å…¼å®¹æ—§ç‰ˆæœ¬çš„å•é“¾æ¥æ¨¡æ‹Ÿåˆ†æ
             const links = [{
                 url: competitorLink,
                 platform: detectPlatform(competitorLink),
                 platformInfo: getPlatformInfo(detectPlatform(competitorLink))
             }];
             
             return await generateMultiPlatformMockAnalysis(links);
         }
        
        async function callDeepSeekAPI(competitorLink) {
            // DeepSeek API é…ç½®
            // ä»é¡µé¢è·å–ç”¨æˆ·è¾“å…¥çš„APIå¯†é’¥
            const API_KEY = document.getElementById('deepseekApiKey')?.value?.trim() || '';
            
            if (!API_KEY || API_KEY === 'sk-your-deepseek-api-key') {
                throw new Error('è¯·å…ˆåœ¨é¡µé¢é¡¶éƒ¨è®¾ç½®æ‚¨çš„DeepSeek APIå¯†é’¥');
            }
            const API_URL = 'https://api.deepseek.com/v1/chat/completions';
            
            // æ„å»ºåˆ†ææç¤ºè¯
            const prompt = `è¯·åˆ†æè¿™ä¸ªOZONå•†å“é“¾æ¥ï¼š${competitorLink}

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. å•†å“æ ‡é¢˜ï¼ˆä¿„æ–‡ï¼‰
2. ä¸»è¦å–ç‚¹å’Œç‰¹å¾ï¼ˆä¸­æ–‡ï¼Œç”¨äºåç»­ç”Ÿæˆï¼‰
3. äº§å“æè¿°è¦ç‚¹
4. å…³é”®è¯å»ºè®®

è¯·ä»¥ç»“æ„åŒ–çš„æ–¹å¼è¿”å›åˆ†æç»“æœã€‚`;
            
            const requestBody = {
                model: "deepseek-chat",
                messages: [
                    {
                        role: "system",
                        content: "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„OZONç”µå•†å¹³å°äº§å“åˆ†æå¸ˆï¼Œæ“…é•¿åˆ†æç«å“å¹¶æå–å…³é”®ä¿¡æ¯ã€‚"
                    },
                    {
                        role: "user",
                        content: prompt
                    }
                ],
                temperature: 0.7,
                max_tokens: 2000
            };
            
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify(requestBody)
                });
                
                if (!response.ok) {
                    throw new Error(`APIè¯·æ±‚å¤±è´¥: ${response.status} ${response.statusText}`);
                }
                
                const data = await response.json();
                const aiResponse = data.choices[0].message.content;
                
                // æ ¼å¼åŒ–AIå“åº”ä¸ºHTML
                return formatAIResponse(aiResponse);
                
            } catch (error) {
                 console.error('DeepSeek APIè°ƒç”¨è¯¦ç»†é”™è¯¯:', error);
                 
                 let errorMessage = 'DeepSeek APIè°ƒç”¨å¤±è´¥ã€‚';
                 
                 if (error.message.includes('402')) {
                     errorMessage += '\nâŒ é”™è¯¯åŸå› ï¼šè´¦æˆ·ä½™é¢ä¸è¶³æˆ–éœ€è¦ä»˜è´¹\n\nğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š\n1. ç™»å½• DeepSeek å¹³å°å……å€¼è´¦æˆ·\n2. æ£€æŸ¥APIä½¿ç”¨é…é¢\n3. æˆ–è€…ä½¿ç”¨ä¸‹æ–¹çš„"æ¨¡æ‹Ÿå–ç‚¹åˆ†æ"åŠŸèƒ½';
                 } else if (error.message.includes('401')) {
                     errorMessage += '\nâŒ é”™è¯¯åŸå› ï¼šAPIå¯†é’¥æ— æ•ˆ\n\nğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š\n1. æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®\n2. ç¡®è®¤å¯†é’¥æ˜¯å¦å·²æ¿€æ´»\n3. é‡æ–°ç”Ÿæˆæ–°çš„APIå¯†é’¥';
                 } else if (error.message.includes('403')) {
                     errorMessage += '\nâŒ é”™è¯¯åŸå› ï¼šè®¿é—®è¢«æ‹’ç»\n\nğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š\n1. æ£€æŸ¥APIå¯†é’¥æƒé™\n2. ç¡®è®¤è´¦æˆ·çŠ¶æ€æ­£å¸¸';
                 } else if (error.message.includes('429')) {
                     errorMessage += '\nâŒ é”™è¯¯åŸå› ï¼šè¯·æ±‚é¢‘ç‡è¿‡é«˜\n\nğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š\n1. ç¨ç­‰ç‰‡åˆ»åé‡è¯•\n2. é™ä½è¯·æ±‚é¢‘ç‡';
                 } else {
                     errorMessage += '\n\nğŸ’¡ å¸¸è§è§£å†³æ–¹æ¡ˆï¼š\n1. æ£€æŸ¥ç½‘ç»œè¿æ¥\n2. éªŒè¯APIå¯†é’¥æ­£ç¡®æ€§\n3. ç¡®è®¤è´¦æˆ·ä½™é¢å……è¶³\n4. æˆ–ä½¿ç”¨æ¨¡æ‹Ÿå–ç‚¹åˆ†æåŠŸèƒ½';
                 }
                 
                 throw new Error(errorMessage);
             }
        }
        
        function formatAIResponse(aiResponse) {
            let formattedResponse;
            
            try {
                // æ£€æŸ¥æ˜¯å¦ä¸ºJSONæ ¼å¼
                if (aiResponse.trim().startsWith('{') || aiResponse.trim().startsWith('[')) {
                    const jsonData = JSON.parse(aiResponse);
                    
                    // å¦‚æœæ˜¯JSONå¯¹è±¡ï¼Œå°è¯•æå–æœ‰ç”¨ä¿¡æ¯å¹¶æ ¼å¼åŒ–
                    if (typeof jsonData === 'object') {
                        formattedResponse = formatJSONToReadable(jsonData);
                    } else {
                        formattedResponse = aiResponse;
                    }
                } else {
                    // æ™®é€šæ–‡æœ¬æ ¼å¼åŒ–
                    formattedResponse = aiResponse
                        .replace(/\n/g, '<br>')
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                        .replace(/\*(.*?)\*/g, '<em>$1</em>');
                }
            } catch (error) {
                // JSONè§£æå¤±è´¥ï¼ŒæŒ‰æ™®é€šæ–‡æœ¬å¤„ç†
                formattedResponse = aiResponse
                    .replace(/\n/g, '<br>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>');
            }
            
            return `
                <h4 class="result-item typewriter">ğŸ¤– DeepSeek AI åˆ†æç»“æœï¼š</h4>
                <div class="result-item" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    ${formattedResponse}
                </div>
                <hr class="result-item">
                <p class="result-item"><strong>ğŸ’¡ æç¤ºï¼š</strong>AIåˆ†æç»“æœå·²è‡ªåŠ¨å¡«å……åˆ°å•†å“ç‰¹å¾ä¸­ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´ã€‚</p>
            `;
        }
        
        function formatJSONToReadable(jsonData) {
            let formatted = '';
            
            // å¦‚æœJSONåŒ…å«å¸¸è§çš„åˆ†æå­—æ®µï¼Œè¿›è¡Œç»“æ„åŒ–æ˜¾ç¤º
            if (jsonData.title || jsonData.å•†å“æ ‡é¢˜) {
                formatted += `<p><strong>ğŸ“‹ å•†å“æ ‡é¢˜ï¼š</strong>${jsonData.title || jsonData.å•†å“æ ‡é¢˜}</p>`;
            }
            
            if (jsonData.features || jsonData.ç‰¹å¾ || jsonData.å–ç‚¹) {
                const features = jsonData.features || jsonData.ç‰¹å¾ || jsonData.å–ç‚¹;
                if (Array.isArray(features)) {
                    formatted += `<p><strong>âœ¨ ä¸»è¦ç‰¹å¾ï¼š</strong>${features.join('ã€')}</p>`;
                } else {
                    formatted += `<p><strong>âœ¨ ä¸»è¦ç‰¹å¾ï¼š</strong>${features}</p>`;
                }
            }
            
            if (jsonData.description || jsonData.æè¿°) {
                formatted += `<p><strong>ğŸ“ äº§å“æè¿°ï¼š</strong>${jsonData.description || jsonData.æè¿°}</p>`;
            }
            
            if (jsonData.keywords || jsonData.å…³é”®è¯) {
                const keywords = jsonData.keywords || jsonData.å…³é”®è¯;
                if (Array.isArray(keywords)) {
                    formatted += `<p><strong>ğŸ” å…³é”®è¯ï¼š</strong>${keywords.join('ã€')}</p>`;
                } else {
                    formatted += `<p><strong>ğŸ” å…³é”®è¯ï¼š</strong>${keywords}</p>`;
                }
            }
            
            // å¦‚æœæ²¡æœ‰è¯†åˆ«åˆ°æ ‡å‡†å­—æ®µï¼Œå°è¯•éå†æ‰€æœ‰å­—æ®µ
            if (!formatted) {
                for (const [key, value] of Object.entries(jsonData)) {
                    if (typeof value === 'string' || typeof value === 'number') {
                        formatted += `<p><strong>${key}ï¼š</strong>${value}</p>`;
                    } else if (Array.isArray(value)) {
                        formatted += `<p><strong>${key}ï¼š</strong>${value.join('ã€')}</p>`;
                    } else if (typeof value === 'object') {
                        formatted += `<p><strong>${key}ï¼š</strong>${JSON.stringify(value, null, 2).replace(/\n/g, '<br>')}</p>`;
                    }
                }
            }
            
            // å¦‚æœä»ç„¶æ²¡æœ‰å†…å®¹ï¼Œæ˜¾ç¤ºåŸå§‹JSONï¼ˆæ ¼å¼åŒ–ï¼‰
            if (!formatted) {
                formatted = `<pre style="background: #f1f1f1; padding: 10px; border-radius: 4px; white-space: pre-wrap;">${JSON.stringify(jsonData, null, 2)}</pre>`;
            }
            
            return formatted;
        }
        
        function autoFillFeaturesFromAI(analysisResult) {
            // ä»AIåˆ†æç»“æœä¸­æ™ºèƒ½æå–ç‰¹å¾
            let features = [];
            
            try {
                // å°è¯•ä»AIå“åº”ä¸­æå–ç‰¹å¾ä¿¡æ¯
                // è¿™é‡Œä½¿ç”¨ç®€å•çš„æ–‡æœ¬è§£æï¼Œå®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦æ›´å¤æ‚çš„è§£æé€»è¾‘
                const text = analysisResult.replace(/<[^>]*>/g, ''); // ç§»é™¤HTMLæ ‡ç­¾
                
                // æŸ¥æ‰¾å¯èƒ½çš„ç‰¹å¾å…³é”®è¯
                const featureKeywords = [
                    'æ— çº¿', 'è“ç‰™', 'é˜²æ°´', 'å¿«å……', 'é•¿ç»­èˆª', 'è½»ä¾¿', 'ä¾¿æº', 'æ™ºèƒ½',
                    'é«˜æ¸…', 'é™å™ª', 'èˆ’é€‚', 'è€ç”¨', 'å¤šåŠŸèƒ½', 'èŠ‚èƒ½', 'å®‰å…¨', 'æ—¶å°š',
                    'ä¸“ä¸š', 'é«˜æ•ˆ', 'ç¨³å®š', 'ç²¾å‡†', 'åˆ›æ–°', 'ä¼˜è´¨', 'å®ç”¨', 'ç»æµ'
                ];
                
                // ä»æ–‡æœ¬ä¸­åŒ¹é…ç‰¹å¾
                featureKeywords.forEach(keyword => {
                    if (text.includes(keyword) && features.length < 6) {
                        features.push(keyword);
                    }
                });
                
                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°è¶³å¤Ÿçš„ç‰¹å¾ï¼Œæ·»åŠ ä¸€äº›é€šç”¨ç‰¹å¾
                if (features.length < 3) {
                    features = features.concat(['é«˜å“è´¨', 'ç”¨æˆ·å‹å¥½', 'æ€§ä»·æ¯”é«˜'].slice(0, 3 - features.length));
                }
                
            } catch (error) {
                console.error('ç‰¹å¾æå–å¤±è´¥:', error);
                // ä½¿ç”¨é»˜è®¤ç‰¹å¾
                features = ['é«˜å“è´¨', 'åˆ›æ–°è®¾è®¡', 'ç”¨æˆ·å‹å¥½', 'æ€§ä»·æ¯”é«˜'];
            }
            
            // æ¸…ç©ºç°æœ‰ç‰¹å¾å¹¶å¡«å……æ–°ç‰¹å¾
            const featuresDiv = document.getElementById('features');
            featuresDiv.innerHTML = '';
            
            features.forEach((feature, index) => {
                const featureContainer = document.createElement('div');
                featureContainer.className = 'feature-container';
                featureContainer.innerHTML = `
                    <input type="text" class="feature-input" value="${feature}" placeholder="è¯·è¾“å…¥å•†å“ç‰¹å¾æè¿°ï¼ˆä¸­æ–‡ï¼‰ï¼šå¦‚"å¯æŠ˜å "ã€"è½»ä¾¿"">
                    ${index === 0 ? 
                        '<button class="add-btn" onclick="addFeature()">+</button>' : 
                        '<button class="remove-btn" onclick="removeFeature(this)">-</button><button class="add-btn" onclick="addFeature()">+</button>'
                    }
                `;
                featuresDiv.appendChild(featureContainer);
            });
        }
        
        function clearForm() {
            // æ·»åŠ æ¸…é™¤åŠ¨ç”»æ•ˆæœ
            const elements = [
                document.getElementById('productName'),
                document.getElementById('competitorLink'),
                document.getElementById('features'),
                document.getElementById('resultArea'),
                document.getElementById('competitorAnalysis'),
                document.getElementById('sceneResultArea'),
                document.getElementById('season')
            ];
            
            // ä¸ºæ¯ä¸ªå…ƒç´ æ·»åŠ æ·¡å‡ºåŠ¨ç”»
            elements.forEach((element, index) => {
                if (element) {
                    element.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                    element.style.opacity = '0';
                    element.style.transform = 'translateY(-10px)';
                    
                    setTimeout(() => {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            element.value = '';
                        } else if (element.tagName === 'SELECT') {
                            // é‡ç½®é€‰æ‹©æ¡†åˆ°é»˜è®¤å€¼
                            if (element.id === 'season') {
                                element.value = 'é€šç”¨';
                            }
                        } else if (element.id === 'features') {
                            // æ¸…é™¤ç‰¹å¾ï¼Œåªä¿ç•™ä¸€ä¸ªç©ºè¾“å…¥æ¡†
                            element.innerHTML = `
                                <div class="feature-container">
                                    <input type="text" class="feature-input" placeholder="è¯·è¾“å…¥å•†å“ç‰¹å¾æè¿°ï¼ˆä¸­æ–‡ï¼‰ï¼šå¦‚"å¯æŠ˜å "ã€"è½»ä¾¿"">
                                    <button class="add-btn" onclick="addFeature()">+</button>
                                </div>
                            `;
                        } else {
                            element.style.display = 'none';
                            if (element.id === 'competitorAnalysis') {
                                element.classList.remove('show');
                            }
                            // æ¸…ç©ºåœºæ™¯å›¾ç»“æœå†…å®¹
                            if (element.id === 'sceneResultArea') {
                                const scenePromptDiv = document.getElementById('scenePrompt');
                                if (scenePromptDiv) {
                                    scenePromptDiv.textContent = '';
                                }
                            }
                        }
                        
                        // æ¢å¤å…ƒç´ 
                        element.style.opacity = '1';
                        element.style.transform = 'translateY(0)';
                    }, 150 + index * 50);
                }
            });
            
            showToast('ğŸ§¹ è¡¨å•å·²æ¸…ç©º');
        }
        
        // APIå¯†é’¥ç®¡ç†åŠŸèƒ½
        function toggleApiKeyVisibility() {
            const apiKeyInput = document.getElementById('deepseekApiKey');
            const button = event.target;
            
            if (apiKeyInput.type === 'password') {
                apiKeyInput.type = 'text';
                button.textContent = 'ğŸ™ˆ';
                button.title = 'éšè—å¯†é’¥';
            } else {
                apiKeyInput.type = 'password';
                button.textContent = 'ğŸ‘ï¸';
                button.title = 'æ˜¾ç¤ºå¯†é’¥';
            }
        }
        
        function saveApiKey() {
            const apiKey = document.getElementById('deepseekApiKey').value.trim();
            if (!apiKey) {
                showToast('âŒ è¯·å…ˆè¾“å…¥APIå¯†é’¥');
                return;
            }
            
            if (!apiKey.startsWith('sk-')) {
                showToast('âŒ APIå¯†é’¥æ ¼å¼ä¸æ­£ç¡®ï¼Œåº”ä»¥ sk- å¼€å¤´');
                return;
            }
            
            try {
                localStorage.setItem('deepseek_api_key', apiKey);
                showToast('âœ… APIå¯†é’¥å·²ä¿å­˜åˆ°æœ¬åœ°');
            } catch (error) {
                showToast('âŒ ä¿å­˜å¤±è´¥: ' + error.message);
            }
        }
        
        function loadApiKey() {
            try {
                const savedApiKey = localStorage.getItem('deepseek_api_key');
                if (savedApiKey) {
                    document.getElementById('deepseekApiKey').value = savedApiKey;
                    showToast('âœ… å·²åŠ è½½ä¿å­˜çš„APIå¯†é’¥');
                }
            } catch (error) {
                console.error('åŠ è½½APIå¯†é’¥å¤±è´¥:', error);
            }
        }
        
        // åŠ è½½åŠ¨ç”»æ§åˆ¶å‡½æ•°
        function showLoadingAnimation(isMock = false) {
            const loadingContainer = document.getElementById('loadingContainer');
            const loadingText = document.getElementById('loadingText');
            const progressFill = document.getElementById('progressFill');
            
            // è®¾ç½®åŠ è½½æ–‡æœ¬
            loadingText.textContent = isMock ? 'ğŸ­ æ­£åœ¨è¿›è¡Œæ¨¡æ‹Ÿå–ç‚¹åˆ†æ...' : 'ğŸ” æ­£åœ¨è°ƒç”¨DeepSeekåˆ†æäº§å“å–ç‚¹...';
            
            // æ˜¾ç¤ºåŠ è½½å®¹å™¨
            loadingContainer.style.display = 'block';
            loadingContainer.classList.add('fade-in');
            
            // é‡ç½®è¿›åº¦æ¡
            progressFill.style.width = '0%';
            
            // é‡ç½®æ­¥éª¤çŠ¶æ€
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            // æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°
            simulateProgress();
        }
        
        function hideLoadingAnimation() {
            const loadingContainer = document.getElementById('loadingContainer');
            loadingContainer.style.display = 'none';
            loadingContainer.classList.remove('fade-in');
        }
        
        function simulateProgress() {
            const steps = ['step1', 'step2', 'step3', 'step4'];
            const progressFill = document.getElementById('progressFill');
            let currentStep = 0;
            
            const updateProgress = () => {
                if (currentStep < steps.length) {
                    // æ¿€æ´»å½“å‰æ­¥éª¤
                    document.getElementById(steps[currentStep]).classList.add('active');
                    
                    // æ›´æ–°è¿›åº¦æ¡
                    const progress = ((currentStep + 1) / steps.length) * 100;
                    progressFill.style.width = progress + '%';
                    
                    currentStep++;
                    
                    // éšæœºå»¶è¿Ÿï¼Œæ¨¡æ‹ŸçœŸå®çš„å¤„ç†æ—¶é—´
                    const delay = Math.random() * 800 + 400; // 400-1200ms
                    setTimeout(updateProgress, delay);
                }
            };
            
            updateProgress();
        }
        
        // åœºæ™¯å›¾æç¤ºè¯ç”Ÿæˆå‡½æ•°
        function generateScenePrompt() {
            const productName = document.getElementById('productName').value.trim();
            const season = document.getElementById('season').value;
            
            if (!productName) {
                showToast('âŒ è¯·å…ˆè¾“å…¥äº§å“ä¸­æ–‡åç§°');
                return;
            }
            
            // è·å–æ‰€æœ‰ç‰¹å¾
            const featureInputs = document.querySelectorAll('.feature-input');
            const features = [];
            featureInputs.forEach(input => {
                const value = input.value.trim();
                if (value) {
                    features.push(value);
                }
            });
            
            // æ„å»ºåœºæ™¯å›¾æç¤ºè¯
            let scenePrompt = `äº§å“ä¸º${productName}ï¼Œ${productName}çš„ç‰¹å¾ä¸º`;
            
            if (features.length > 0) {
                scenePrompt += features.join('ï¼Œ') + 'ï¼Œ';
            } else {
                scenePrompt += 'é«˜å“è´¨ï¼Œå®ç”¨ï¼Œ';
            }
            
            scenePrompt += `æ¯”ä¾‹ã€Œ1:1ã€å¸®æˆ‘ç”Ÿæˆäº§å“èƒŒæ™¯å›¾æç¤ºè¯ï¼ˆé«˜çº§ï¼ï¼‰`;
            
            if (season !== 'é€šç”¨') {
                scenePrompt += `ç©¿ç€å­£èŠ‚ä¸ºï¼š${season}`;
            } else {
                scenePrompt += `é€‚ç”¨äºå„ç§åœºåˆ`;
            }
            
            scenePrompt += `ï¼ˆä¸è¦ç”Ÿæˆå›¾ç‰‡ï¼Œä»…éœ€è¦æç¤ºè¯ï¼Œåœºæ™¯è¦æœ‰æ„å¢ƒï¼Œç¬¦åˆä¿„ç½—æ–¯å®¡ç¾ï¼Œç¬¦åˆç°å®ç‰¹å¾ï¼‰`;
            
            if (features.length > 0) {
                scenePrompt += ` è¯·çªå‡º${features.join('ï¼Œ')}çš„ç‰¹å¾`;
            }
            
            // æ˜¾ç¤ºç»“æœ
            const sceneResultArea = document.getElementById('sceneResultArea');
            const scenePromptDiv = document.getElementById('scenePrompt');
            
            scenePromptDiv.textContent = scenePrompt;
            sceneResultArea.style.display = 'block';
            sceneResultArea.classList.add('fade-in');
            
            showToast('ğŸ¨ åœºæ™¯å›¾æç¤ºè¯ç”Ÿæˆå®Œæˆï¼');
        }
        
        // å¤åˆ¶åœºæ™¯å›¾æç¤ºè¯
        function copyScenePrompt() {
            const promptText = document.getElementById('scenePrompt').textContent;
            navigator.clipboard.writeText(promptText)
                .then(() => showToast('âœ… åœºæ™¯å›¾æç¤ºè¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿'))
                .catch(err => showToast('âŒ å¤åˆ¶å¤±è´¥: ' + err));
        }
        
        // è·³è½¬åˆ°è±†åŒ…
        function goToDouBao() {
            window.open('https://www.doubao.com/', '_blank');
        }
        
        // AIæ¨¡å‹é€‰æ‹©å¤„ç†å‡½æ•°
        function onAiModelChange() {
            const aiModel = document.getElementById('aiModel').value;
            
            // è·å–DeepSeeké…ç½®åŒºåŸŸ
            const deepseekConfig = document.getElementById('deepseekConfig');
            const deepseekHelp = document.getElementById('deepseekHelp');
            
            // éšè—é…ç½®åŒºåŸŸ
            if (deepseekConfig) deepseekConfig.style.display = 'none';
            deepseekHelp.style.display = 'none';
            
            // æ˜¾ç¤ºDeepSeeké…ç½®åŒºåŸŸ
            if (aiModel === 'deepseek') {
                if (deepseekConfig) deepseekConfig.style.display = 'block';
                deepseekHelp.style.display = 'block';
            }
        }
        

        

        

        

        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½ä¿å­˜çš„APIå¯†é’¥
        window.addEventListener('load', function() {
            loadApiKey();
            onAiModelChange(); // åˆå§‹åŒ–AIæ¨¡å‹é€‰æ‹©çŠ¶æ€
        })
    </script>
</body>
</html>